{"remainingRequest":"/home/justin/Desktop/CICMS/node_modules/thread-loader/dist/cjs.js!/home/justin/Desktop/CICMS/node_modules/babel-loader/lib/index.js!/home/justin/Desktop/CICMS/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/justin/Desktop/CICMS/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/justin/Desktop/CICMS/src/components/GameCanvas.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/justin/Desktop/CICMS/src/components/GameCanvas.vue","mtime":1771874482536},{"path":"/home/justin/Desktop/CICMS/babel.config.js","mtime":1771823009049},{"path":"/home/justin/Desktop/CICMS/node_modules/cache-loader/dist/cjs.js","mtime":1771824225125},{"path":"/home/justin/Desktop/CICMS/node_modules/thread-loader/dist/cjs.js","mtime":1771824225135},{"path":"/home/justin/Desktop/CICMS/node_modules/babel-loader/lib/index.js","mtime":1771824228601},{"path":"/home/justin/Desktop/CICMS/node_modules/cache-loader/dist/cjs.js","mtime":1771824225125},{"path":"/home/justin/Desktop/CICMS/node_modules/vue-loader/lib/index.js","mtime":1771824228358}],"contextDependencies":[],"result":["import wsService from '../services/websocket';\nconst TILE_SIZE = 32;\nconst TILE_COLORS = {\n  0: '#4a7c3f',\n  // grass\n  1: '#2b5eab',\n  // water\n  2: '#6e6e6e',\n  // mountain\n  3: '#2d5a1b',\n  // tree\n  4: '#8b7355',\n  // path\n  5: '#a08060',\n  // wall\n  6: '#444444',\n  // mine\n  7: '#c8a228',\n  // bank\n  8: '#8a5a2a',\n  // shop\n  9: '#c8b87a',\n  // sand\n  10: '#5a8f3a' // flower\n};\nexport default {\n  name: 'GameCanvas',\n  data() {\n    return {\n      canvas: null,\n      ctx: null,\n      animFrame: null,\n      cameraX: 0,\n      cameraY: 0,\n      mouseCol: -1,\n      mouseRow: -1,\n      animTick: 0,\n      lastFrame: 0,\n      // Pre-compute map for rendering\n      worldMap: null,\n      hoverEntity: null\n    };\n  },\n  computed: {\n    player() {\n      return this.$store.state.player;\n    },\n    otherPlayers() {\n      return this.$store.state.world.otherPlayers;\n    },\n    npcs() {\n      return this.$store.state.world.npcs;\n    },\n    worldItems() {\n      return this.$store.state.world.worldItems;\n    },\n    survival() {\n      return this.$store.state.world.survival;\n    }\n  },\n  mounted() {\n    this.canvas = this.$refs.canvas;\n    this.ctx = this.canvas.getContext('2d');\n    this.resize();\n    window.addEventListener('resize', this.resize);\n\n    // Import map from constants\n    import(/* webpackChunkName: \"constants\" */'../../server/shared/constants.js').catch(() => {\n      // Fallback: generate a simple map\n      this.worldMap = this.generateFallbackMap();\n    }).then(mod => {\n      if (mod) this.worldMap = mod.WORLD_MAP;\n      this.startLoop();\n    });\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.resize);\n    if (this.animFrame) cancelAnimationFrame(this.animFrame);\n  },\n  methods: {\n    resize() {\n      const container = this.$el.parentElement;\n      this.canvas.width = container.clientWidth;\n      this.canvas.height = container.clientHeight;\n    },\n    generateFallbackMap() {\n      // 40x32 grass map with paths and water\n      const cols = 40,\n        rows = 32;\n      const map = [];\n      for (let r = 0; r < rows; r++) {\n        const row = [];\n        for (let c = 0; c < cols; c++) {\n          if (r === 0 || r === rows - 1 || c === 0 || c === cols - 1) row.push(2);else if (r === 6 || r === 12 || r === 20) row.push(4);else if (c === 19) row.push(4);else if (c < 4 && r > 12 && r < 22) row.push(1);else row.push(0);\n        }\n        map.push(row);\n      }\n      return map;\n    },\n    startLoop() {\n      const loop = timestamp => {\n        const delta = timestamp - this.lastFrame;\n        this.lastFrame = timestamp;\n        this.animTick = timestamp;\n        this.update(delta);\n        this.render();\n        this.animFrame = requestAnimationFrame(loop);\n      };\n      this.animFrame = requestAnimationFrame(loop);\n    },\n    update() {\n      // Update camera to follow player\n      if (!this.player || !this.canvas) return;\n      const targetCamX = this.player.x - this.canvas.width / 2;\n      const targetCamY = this.player.y - this.canvas.height / 2;\n\n      // Smooth camera\n      const lerp = 0.12;\n      this.cameraX += (targetCamX - this.cameraX) * lerp;\n      this.cameraY += (targetCamY - this.cameraY) * lerp;\n\n      // Clamp camera\n      if (this.worldMap) {\n        const mapW = this.worldMap[0].length * TILE_SIZE;\n        const mapH = this.worldMap.length * TILE_SIZE;\n        this.cameraX = Math.max(0, Math.min(this.cameraX, mapW - this.canvas.width));\n        this.cameraY = Math.max(0, Math.min(this.cameraY, mapH - this.canvas.height));\n      }\n    },\n    render() {\n      if (!this.ctx || !this.canvas) return;\n      const ctx = this.ctx;\n      const w = this.canvas.width;\n      const h = this.canvas.height;\n      ctx.clearRect(0, 0, w, h);\n      ctx.save();\n      ctx.translate(-Math.floor(this.cameraX), -Math.floor(this.cameraY));\n      this.renderMap(ctx);\n      this.renderWorldItems(ctx);\n      this.renderNPCs(ctx);\n      this.renderOtherPlayers(ctx);\n      this.renderPlayer(ctx);\n      this.renderHoverHighlight(ctx);\n      ctx.restore();\n      this.renderNightOverlay(ctx, w, h);\n    },\n    renderMap(ctx) {\n      if (!this.worldMap) return;\n      const startCol = Math.max(0, Math.floor(this.cameraX / TILE_SIZE) - 1);\n      const startRow = Math.max(0, Math.floor(this.cameraY / TILE_SIZE) - 1);\n      const endCol = Math.min(this.worldMap[0].length, startCol + Math.ceil(this.canvas.width / TILE_SIZE) + 2);\n      const endRow = Math.min(this.worldMap.length, startRow + Math.ceil(this.canvas.height / TILE_SIZE) + 2);\n      for (let row = startRow; row < endRow; row++) {\n        for (let col = startCol; col < endCol; col++) {\n          let tile = this.worldMap[row][col];\n\n          // Check dynamic tiles\n          if (this.survival && this.survival.dynamicTiles) {\n            const dynamicTile = this.survival.dynamicTiles[`${col},${row}`];\n            if (dynamicTile !== undefined) tile = dynamicTile;\n          }\n          const px = col * TILE_SIZE;\n          const py = row * TILE_SIZE;\n\n          // Base tile color\n          ctx.fillStyle = TILE_COLORS[tile] || '#444';\n          ctx.fillRect(px, py, TILE_SIZE, TILE_SIZE);\n\n          // Tile details/decorations\n          this.renderTileDetail(ctx, tile, px, py, col, row);\n        }\n      }\n    },\n    renderTileDetail(ctx, tile, px, py, col, row) {\n      const t = this.animTick;\n      switch (tile) {\n        case 0:\n          // Grass - subtle variation\n          if ((col + row) % 3 === 0) {\n            ctx.fillStyle = 'rgba(0,0,0,0.06)';\n            ctx.fillRect(px, py, TILE_SIZE, TILE_SIZE);\n          }\n          break;\n        case 1:\n          // Water - animated\n          ctx.fillStyle = `rgba(100,160,255,${0.2 + Math.sin(t / 800 + col * 0.5 + row * 0.3) * 0.1})`;\n          ctx.fillRect(px, py, TILE_SIZE, TILE_SIZE);\n          // Ripple\n          ctx.strokeStyle = `rgba(200,230,255,${0.2 + Math.sin(t / 1000 + col + row) * 0.1})`;\n          ctx.lineWidth = 1;\n          ctx.beginPath();\n          ctx.moveTo(px + 4, py + 16 + Math.sin(t / 500 + col) * 2);\n          ctx.lineTo(px + 28, py + 16 + Math.sin(t / 500 + col + 1) * 2);\n          ctx.stroke();\n          break;\n        case 2:\n          // Mountain - rocky texture\n          ctx.fillStyle = '#555555';\n          ctx.fillRect(px + 6, py + 8, 20, 16);\n          ctx.fillStyle = '#888888';\n          ctx.fillRect(px + 10, py + 4, 12, 10);\n          ctx.fillStyle = '#aaaaaa';\n          ctx.fillRect(px + 13, py, 6, 6);\n          break;\n        case 3:\n          // Tree\n          // Trunk\n          ctx.fillStyle = '#5a3a1a';\n          ctx.fillRect(px + 13, py + 20, 6, 10);\n          // Canopy\n          ctx.fillStyle = '#1a5c1a';\n          ctx.beginPath();\n          ctx.arc(px + 16, py + 14, 12, 0, Math.PI * 2);\n          ctx.fill();\n          ctx.fillStyle = '#2a7a2a';\n          ctx.beginPath();\n          ctx.arc(px + 14, py + 12, 8, 0, Math.PI * 2);\n          ctx.fill();\n          break;\n        case 4:\n          // Path - cobblestone\n          ctx.strokeStyle = 'rgba(0,0,0,0.15)';\n          ctx.lineWidth = 0.5;\n          for (let i = 0; i < 3; i++) {\n            for (let j = 0; j < 3; j++) {\n              ctx.strokeRect(px + 2 + i * 10, py + 2 + j * 10, 8, 8);\n            }\n          }\n          break;\n        case 5:\n          // Wall - brick\n          ctx.fillStyle = '#8a6a48';\n          ctx.fillRect(px, py, TILE_SIZE, TILE_SIZE);\n          ctx.fillStyle = 'rgba(0,0,0,0.2)';\n          for (let i = 0; i < 3; i++) {\n            ctx.fillRect(px, py + i * 10 + 1, TILE_SIZE, 2);\n          }\n          break;\n        case 6:\n          // Mine - dark entrance\n          ctx.fillStyle = '#222222';\n          ctx.fillRect(px + 6, py + 10, 20, 18);\n          // Mine entrance arch\n          ctx.fillStyle = '#1a1a1a';\n          ctx.beginPath();\n          ctx.arc(px + 16, py + 18, 10, Math.PI, 0);\n          ctx.fill();\n          // Pickaxe icon\n          ctx.fillStyle = '#888';\n          ctx.font = '14px serif';\n          ctx.fillText('â›', px + 9, py + 22);\n          break;\n        case 7:\n          // Bank - golden building\n          ctx.fillStyle = '#c8a228';\n          ctx.fillRect(px + 2, py + 6, 28, 22);\n          ctx.fillStyle = '#f5d44a';\n          ctx.fillRect(px + 6, py + 2, 20, 6);\n          // Columns\n          ctx.fillStyle = '#a88822';\n          ctx.fillRect(px + 6, py + 8, 3, 18);\n          ctx.fillRect(px + 23, py + 8, 3, 18);\n          // Door\n          ctx.fillStyle = '#5a3a1a';\n          ctx.fillRect(px + 12, py + 18, 8, 10);\n          break;\n        case 8:\n          // Shop - wooden building\n          ctx.fillStyle = '#8a5a30';\n          ctx.fillRect(px + 2, py + 8, 28, 20);\n          // Roof\n          ctx.fillStyle = '#c8701a';\n          ctx.beginPath();\n          ctx.moveTo(px, py + 10);\n          ctx.lineTo(px + 16, py);\n          ctx.lineTo(px + 32, py + 10);\n          ctx.fill();\n          // Window\n          ctx.fillStyle = '#88ccdd';\n          ctx.fillRect(px + 6, py + 12, 8, 8);\n          // Door\n          ctx.fillStyle = '#3a2010';\n          ctx.fillRect(px + 18, py + 18, 8, 10);\n          break;\n        case 10:\n          // Flower\n          ctx.fillStyle = '#ff8800';\n          ctx.beginPath();\n          ctx.arc(px + 16, py + 16, 4, 0, Math.PI * 2);\n          ctx.fill();\n          ctx.fillStyle = '#ffdd00';\n          ctx.beginPath();\n          ctx.arc(px + 16, py + 16, 2, 0, Math.PI * 2);\n          ctx.fill();\n          break;\n      }\n\n      // Tile grid (subtle)\n      ctx.strokeStyle = 'rgba(0,0,0,0.05)';\n      ctx.lineWidth = 0.5;\n      ctx.strokeRect(px, py, TILE_SIZE, TILE_SIZE);\n    },\n    renderWorldItems(ctx) {\n      const t = this.animTick;\n      this.worldItems.forEach(item => {\n        const px = item.col * TILE_SIZE;\n        const py = item.row * TILE_SIZE;\n        const bobY = Math.sin(t / 600 + item.col * 0.7) * 2;\n\n        // Glow\n        ctx.shadowColor = item.color || '#ffffff';\n        ctx.shadowBlur = 8;\n        ctx.fillStyle = item.color || '#ffcc00';\n        ctx.beginPath();\n        ctx.arc(px + TILE_SIZE / 2, py + TILE_SIZE / 2 + bobY, 5, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.shadowBlur = 0;\n\n        // Emoji\n        ctx.font = '14px serif';\n        ctx.textAlign = 'center';\n        ctx.fillText(item.emoji || 'ðŸ“¦', px + 16, py + 20 + bobY);\n      });\n      ctx.textAlign = 'left';\n    },\n    renderNPCs(ctx) {\n      const t = this.animTick;\n      this.npcs.forEach(npc => {\n        const bobY = npc.moving ? Math.sin(t / 200) * 2 : 0;\n\n        // Shadow\n        ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        ctx.beginPath();\n        ctx.ellipse(npc.x, npc.y + 14, 12, 5, 0, 0, Math.PI * 2);\n        ctx.fill();\n\n        // NPC body\n        ctx.fillStyle = npc.color || '#4488cc';\n        ctx.beginPath();\n        ctx.arc(npc.x, npc.y - 2 + bobY, 14, 0, Math.PI * 2);\n        ctx.fill();\n\n        // NPC emoji\n        ctx.font = '18px serif';\n        ctx.textAlign = 'center';\n        ctx.fillText(npc.emoji || 'ðŸ‘¤', npc.x, npc.y + 7 + bobY);\n\n        // Name tag\n        ctx.font = 'bold 10px Inter, sans-serif';\n        ctx.textAlign = 'center';\n        const nameWidth = ctx.measureText(npc.name).width + 8;\n        ctx.fillStyle = 'rgba(0,0,0,0.6)';\n        ctx.fillRect(npc.x - nameWidth / 2, npc.y - 28 + bobY, nameWidth, 14);\n        ctx.fillStyle = '#ffffff';\n        ctx.fillText(npc.name, npc.x, npc.y - 17 + bobY);\n\n        // Type indicator\n        let typeIcon = '';\n        if (npc.type === 'shop') typeIcon = 'ðŸ›’';else if (npc.type === 'bank') typeIcon = 'ðŸ¦';\n        if (typeIcon) {\n          ctx.font = '10px serif';\n          ctx.fillText(typeIcon, npc.x + 14, npc.y - 14 + bobY);\n        }\n      });\n      ctx.textAlign = 'left';\n    },\n    renderOtherPlayers(ctx) {\n      const t = this.animTick;\n      this.otherPlayers.forEach(p => {\n        this.renderCharacter(ctx, p, false, t);\n      });\n    },\n    renderPlayer(ctx) {\n      const p = this.player;\n      if (!p || !p.x) return;\n      this.renderCharacter(ctx, p, true, this.animTick);\n    },\n    renderCharacter(ctx, p, isMe, t) {\n      const px = p.x;\n      const py = p.y;\n\n      // Shadow\n      ctx.fillStyle = 'rgba(0,0,0,0.25)';\n      ctx.beginPath();\n      ctx.ellipse(px, py + 14, 12, 4, 0, 0, Math.PI * 2);\n      ctx.fill();\n\n      // Body (legs animation)\n      if (p.moving) {\n        // Left leg\n        ctx.fillStyle = '#333';\n        ctx.fillRect(px - 6, py + 4, 5, 10 + Math.sin(t / 150) * 4);\n        // Right leg\n        ctx.fillRect(px + 1, py + 4, 5, 10 - Math.sin(t / 150) * 4);\n      } else {\n        ctx.fillStyle = '#333';\n        ctx.fillRect(px - 6, py + 4, 11, 10);\n      }\n\n      // Torso\n      ctx.fillStyle = isMe ? '#2266cc' : '#cc6622';\n      ctx.fillRect(px - 9, py - 8, 18, 14);\n\n      // Head\n      ctx.fillStyle = '#ffcc99';\n      ctx.beginPath();\n      ctx.arc(px, py - 14, 10, 0, Math.PI * 2);\n      ctx.fill();\n\n      // Eyes based on direction\n      ctx.fillStyle = '#333';\n      if (p.direction === 'south' || !p.direction) {\n        ctx.beginPath();\n        ctx.arc(px - 3, py - 15, 2, 0, Math.PI * 2);\n        ctx.arc(px + 3, py - 15, 2, 0, Math.PI * 2);\n        ctx.fill();\n      } else if (p.direction === 'north') {\n        // Back of head, no eyes\n      } else if (p.direction === 'east') {\n        ctx.beginPath();\n        ctx.arc(px + 4, py - 14, 2, 0, Math.PI * 2);\n        ctx.fill();\n      } else if (p.direction === 'west') {\n        ctx.beginPath();\n        ctx.arc(px - 4, py - 14, 2, 0, Math.PI * 2);\n        ctx.fill();\n      }\n\n      // Player glow if \"me\"\n      if (isMe) {\n        const emotionColors = {\n          happy: 'rgba(255, 220, 0, 0.8)',\n          sad: 'rgba(0, 100, 255, 0.8)',\n          angry: 'rgba(255, 0, 0, 0.8)',\n          fear: 'rgba(150, 0, 255, 0.8)',\n          neutral: 'rgba(100, 180, 255, 0.8)'\n        };\n        const glowColor = emotionColors[p.emotion] || emotionColors.neutral;\n        ctx.shadowColor = glowColor;\n        ctx.shadowBlur = 12;\n        ctx.strokeStyle = glowColor;\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.arc(px, py - 14, 12, 0, Math.PI * 2);\n        ctx.stroke();\n        ctx.shadowBlur = 0;\n      }\n\n      // Name tag\n      ctx.font = 'bold 11px Inter, sans-serif';\n      ctx.textAlign = 'center';\n      const nameW = ctx.measureText(p.name).width + 10;\n      ctx.fillStyle = isMe ? 'rgba(20,60,120,0.8)' : 'rgba(0,0,0,0.7)';\n      ctx.fillRect(px - nameW / 2, py - 34, nameW, 16);\n      ctx.fillStyle = isMe ? '#88ccff' : '#ffffff';\n      ctx.fillText(p.name, px, py - 22);\n\n      // Health bar\n      if (p.health !== undefined && p.maxHealth > 0) {\n        const barW = 32;\n        const barH = 3;\n        const barX = px - barW / 2;\n        const barY = py - 38;\n        const pct = p.health / p.maxHealth;\n        ctx.fillStyle = 'rgba(0,0,0,0.5)';\n        ctx.fillRect(barX, barY, barW, barH);\n        ctx.fillStyle = pct > 0.5 ? '#44dd44' : pct > 0.25 ? '#dddd44' : '#dd4444';\n        ctx.fillRect(barX, barY, barW * pct, barH);\n      }\n      ctx.textAlign = 'left';\n    },\n    renderHoverHighlight(ctx) {\n      if (this.mouseCol < 0 || this.mouseRow < 0) return;\n      const px = this.mouseCol * TILE_SIZE;\n      const py = this.mouseRow * TILE_SIZE;\n      ctx.strokeStyle = 'rgba(255,255,100,0.5)';\n      ctx.lineWidth = 2;\n      ctx.strokeRect(px + 1, py + 1, TILE_SIZE - 2, TILE_SIZE - 2);\n    },\n    renderNightOverlay(ctx, w, h) {\n      if (!this.survival) return;\n      const b = this.survival.brightness;\n      if (b >= 1) return;\n      ctx.fillStyle = `rgba(0, 0, 20, ${1 - b})`;\n      ctx.fillRect(0, 0, w, h);\n    },\n    // Convert screen coords to world tile\n    screenToTile(screenX, screenY) {\n      const worldX = screenX + this.cameraX;\n      const worldY = screenY + this.cameraY;\n      return {\n        col: Math.floor(worldX / TILE_SIZE),\n        row: Math.floor(worldY / TILE_SIZE)\n      };\n    },\n    handleClick(e) {\n      const rect = this.canvas.getBoundingClientRect();\n      const screenX = e.clientX - rect.left;\n      const screenY = e.clientY - rect.top;\n      const {\n        col,\n        row\n      } = this.screenToTile(screenX, screenY);\n\n      // Check if clicking on an NPC\n      const clickedNPC = this.getNearbyEntity(col, row, 'npc');\n      if (clickedNPC) {\n        wsService.interact(clickedNPC.id, 'npc');\n        return;\n      }\n\n      // Check if clicking on a world item\n      const clickedItem = this.getNearbyEntity(col, row, 'item');\n      if (clickedItem) {\n        wsService.interact(clickedItem.id, 'item');\n        return;\n      }\n\n      // Otherwise move to that tile\n      wsService.moveRequest(col, row);\n    },\n    handleRightClick(e) {\n      const rect = this.canvas.getBoundingClientRect();\n      const screenX = e.clientX - rect.left;\n      const screenY = e.clientY - rect.top;\n      const {\n        col,\n        row\n      } = this.screenToTile(screenX, screenY);\n\n      // Collect context options\n      const options = [];\n\n      // Check NPC\n      const npc = this.getNearbyEntity(col, row, 'npc');\n      if (npc) {\n        if (npc.type === 'shop') options.push({\n          label: `ðŸ›’ Trade with ${npc.name}`,\n          action: () => wsService.interact(npc.id, 'npc')\n        });else if (npc.type === 'bank') options.push({\n          label: `ðŸ¦ Bank with ${npc.name}`,\n          action: () => wsService.interact(npc.id, 'npc')\n        });else options.push({\n          label: `ðŸ’¬ Talk to ${npc.name}`,\n          action: () => wsService.interact(npc.id, 'npc')\n        });\n      }\n\n      // Check world item\n      const item = this.getNearbyEntity(col, row, 'item');\n      if (item) {\n        options.push({\n          label: `âœ‹ Pick up ${item.name}`,\n          action: () => wsService.interact(item.id, 'item')\n        });\n      }\n\n      // Check for resource zones\n      const zoneOption = this.getZoneOption(col, row);\n      if (zoneOption) options.push(zoneOption);\n\n      // Walk here\n      options.push({\n        label: `ðŸš¶ Walk here`,\n        action: () => wsService.moveRequest(col, row)\n      });\n\n      // Survival Options\n      if (this.survival && this.survival.dynamicTiles) {\n        const isDynamic = this.survival.dynamicTiles[`${col},${row}`] !== undefined;\n        if (isDynamic) {\n          options.push({\n            label: `â›ï¸ Mine this block`,\n            action: () => wsService.action('mine', {\n              args: [col, row]\n            })\n          });\n        } else {\n          options.push({\n            label: 'ðŸ•³ï¸ Dig here',\n            action: () => wsService.action('dig', {\n              args: [col, row]\n            })\n          });\n          const hasWood = this.$store.state.inventory.items.some(i => i.defKey === 'WOOD');\n          if (hasWood) {\n            options.push({\n              label: 'ðŸ§± Place Wood',\n              action: () => wsService.action('place', {\n                args: ['wood', col, row]\n              })\n            });\n          }\n          options.push({\n            label: 'ðŸ  Build Shelter',\n            action: () => wsService.action('house', {\n              args: []\n            })\n          });\n        }\n      }\n\n      // Show context menu\n      if (options.length > 0) {\n        this.$root.$emit('show-context-menu', {\n          event: e,\n          type: npc ? 'npc' : item ? 'worldItem' : 'walk',\n          npc,\n          worldItem: item,\n          options,\n          col,\n          row\n        });\n      }\n    },\n    handleMouseMove(e) {\n      const rect = this.canvas.getBoundingClientRect();\n      const {\n        col,\n        row\n      } = this.screenToTile(e.clientX - rect.left, e.clientY - rect.top);\n      this.mouseCol = col;\n      this.mouseRow = row;\n    },\n    getNearbyEntity(col, row, type) {\n      const maxDist = 2;\n      if (type === 'npc') {\n        return this.npcs.find(n => Math.abs(n.col - col) <= maxDist && Math.abs(n.row - row) <= maxDist) || null;\n      }\n      if (type === 'item') {\n        return this.worldItems.find(i => Math.abs(i.col - col) <= maxDist && Math.abs(i.row - row) <= maxDist) || null;\n      }\n      return null;\n    },\n    getZoneOption(col, row) {\n      // Match to respawn zones\n      const zones = {\n        FOREST_1: {\n          col: 14,\n          row: 2,\n          radius: 2,\n          label: 'ðŸª“ Chop Wood'\n        },\n        FOREST_2: {\n          col: 26,\n          row: 3,\n          radius: 2,\n          label: 'ðŸª“ Chop Wood'\n        },\n        DIG_SITE: {\n          col: 7,\n          row: 8,\n          radius: 2,\n          label: 'â›ï¸ Dig for Gems'\n        },\n        IRON_MINE: {\n          col: 5,\n          row: 5,\n          radius: 3,\n          label: 'â›ï¸ Mine Iron Ore'\n        },\n        GOLD_MINE: {\n          col: 8,\n          row: 3,\n          radius: 2,\n          label: 'â›ï¸ Mine Gold Ore'\n        },\n        FISHING_SPOT: {\n          col: 2,\n          row: 18,\n          radius: 2,\n          label: 'ðŸŽ£ Fish here'\n        },\n        GRAVEYARD: {\n          col: 34,\n          row: 26,\n          radius: 3,\n          label: 'ðŸ¦´ Gather bones'\n        },\n        SHEEP_FLOCK: {\n          col: 22,\n          row: 8,\n          radius: 3,\n          label: 'âš”ï¸ Attack Sheep'\n        },\n        CREEPER_NEST: {\n          col: 10,\n          row: 20,\n          radius: 2,\n          label: 'ðŸ’¥ Kill Creeper'\n        }\n      };\n      for (const [key, zone] of Object.entries(zones)) {\n        if (Math.abs(col - zone.col) <= zone.radius && Math.abs(row - zone.row) <= zone.radius) {\n          return {\n            label: zone.label,\n            action: () => wsService.gather(null, key)\n          };\n        }\n      }\n      return null;\n    }\n  }\n};",{"version":3,"names":["wsService","TILE_SIZE","TILE_COLORS","name","data","canvas","ctx","animFrame","cameraX","cameraY","mouseCol","mouseRow","animTick","lastFrame","worldMap","hoverEntity","computed","player","$store","state","otherPlayers","world","npcs","worldItems","survival","mounted","$refs","getContext","resize","window","addEventListener","catch","generateFallbackMap","then","mod","WORLD_MAP","startLoop","beforeDestroy","removeEventListener","cancelAnimationFrame","methods","container","$el","parentElement","width","clientWidth","height","clientHeight","cols","rows","map","r","row","c","push","loop","timestamp","delta","update","render","requestAnimationFrame","targetCamX","x","targetCamY","y","lerp","mapW","length","mapH","Math","max","min","w","h","clearRect","save","translate","floor","renderMap","renderWorldItems","renderNPCs","renderOtherPlayers","renderPlayer","renderHoverHighlight","restore","renderNightOverlay","startCol","startRow","endCol","ceil","endRow","col","tile","dynamicTiles","dynamicTile","undefined","px","py","fillStyle","fillRect","renderTileDetail","t","sin","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","arc","PI","fill","i","j","strokeRect","font","fillText","forEach","item","bobY","shadowColor","color","shadowBlur","textAlign","emoji","npc","moving","ellipse","nameWidth","measureText","typeIcon","type","p","renderCharacter","isMe","direction","emotionColors","happy","sad","angry","fear","neutral","glowColor","emotion","nameW","health","maxHealth","barW","barH","barX","barY","pct","b","brightness","screenToTile","screenX","screenY","worldX","worldY","handleClick","e","rect","getBoundingClientRect","clientX","left","clientY","top","clickedNPC","getNearbyEntity","interact","id","clickedItem","moveRequest","handleRightClick","options","label","action","zoneOption","getZoneOption","isDynamic","args","hasWood","inventory","items","some","defKey","$root","$emit","event","worldItem","handleMouseMove","maxDist","find","n","abs","zones","FOREST_1","radius","FOREST_2","DIG_SITE","IRON_MINE","GOLD_MINE","FISHING_SPOT","GRAVEYARD","SHEEP_FLOCK","CREEPER_NEST","key","zone","Object","entries","gather"],"sources":["src/components/GameCanvas.vue"],"sourcesContent":["<template>\n  <canvas\n    ref=\"canvas\"\n    id=\"game-canvas\"\n    @click=\"handleClick\"\n    @contextmenu.prevent=\"handleRightClick\"\n    @mousemove=\"handleMouseMove\"\n  ></canvas>\n</template>\n\n<script>\nimport wsService from '../services/websocket';\n\nconst TILE_SIZE = 32;\nconst TILE_COLORS = {\n  0: '#4a7c3f',   // grass\n  1: '#2b5eab',   // water\n  2: '#6e6e6e',   // mountain\n  3: '#2d5a1b',   // tree\n  4: '#8b7355',   // path\n  5: '#a08060',   // wall\n  6: '#444444',   // mine\n  7: '#c8a228',   // bank\n  8: '#8a5a2a',   // shop\n  9: '#c8b87a',   // sand\n  10: '#5a8f3a',  // flower\n};\n\n\nexport default {\n  name: 'GameCanvas',\n  data() {\n    return {\n      canvas: null,\n      ctx: null,\n      animFrame: null,\n      cameraX: 0,\n      cameraY: 0,\n      mouseCol: -1,\n      mouseRow: -1,\n      animTick: 0,\n      lastFrame: 0,\n      // Pre-compute map for rendering\n      worldMap: null,\n      hoverEntity: null,\n    };\n  },\n  computed: {\n    player() {\n      return this.$store.state.player;\n    },\n    otherPlayers() {\n      return this.$store.state.world.otherPlayers;\n    },\n    npcs() {\n      return this.$store.state.world.npcs;\n    },\n    worldItems() {\n      return this.$store.state.world.worldItems;\n    },\n    survival() {\n      return this.$store.state.world.survival;\n    },\n  },\n  mounted() {\n    this.canvas = this.$refs.canvas;\n    this.ctx = this.canvas.getContext('2d');\n    this.resize();\n    window.addEventListener('resize', this.resize);\n\n    // Import map from constants\n    import(/* webpackChunkName: \"constants\" */ '../../server/shared/constants.js')\n      .catch(() => {\n        // Fallback: generate a simple map\n        this.worldMap = this.generateFallbackMap();\n      })\n      .then((mod) => {\n        if (mod) this.worldMap = mod.WORLD_MAP;\n        this.startLoop();\n      });\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.resize);\n    if (this.animFrame) cancelAnimationFrame(this.animFrame);\n  },\n  methods: {\n    resize() {\n      const container = this.$el.parentElement;\n      this.canvas.width = container.clientWidth;\n      this.canvas.height = container.clientHeight;\n    },\n\n    generateFallbackMap() {\n      // 40x32 grass map with paths and water\n      const cols = 40, rows = 32;\n      const map = [];\n      for (let r = 0; r < rows; r++) {\n        const row = [];\n        for (let c = 0; c < cols; c++) {\n          if (r === 0 || r === rows - 1 || c === 0 || c === cols - 1) row.push(2);\n          else if (r === 6 || r === 12 || r === 20) row.push(4);\n          else if (c === 19) row.push(4);\n          else if (c < 4 && r > 12 && r < 22) row.push(1);\n          else row.push(0);\n        }\n        map.push(row);\n      }\n      return map;\n    },\n\n    startLoop() {\n      const loop = (timestamp) => {\n        const delta = timestamp - this.lastFrame;\n        this.lastFrame = timestamp;\n        this.animTick = timestamp;\n        this.update(delta);\n        this.render();\n        this.animFrame = requestAnimationFrame(loop);\n      };\n      this.animFrame = requestAnimationFrame(loop);\n    },\n\n    update() {\n      // Update camera to follow player\n      if (!this.player || !this.canvas) return;\n\n      const targetCamX = this.player.x - this.canvas.width / 2;\n      const targetCamY = this.player.y - this.canvas.height / 2;\n\n      // Smooth camera\n      const lerp = 0.12;\n      this.cameraX += (targetCamX - this.cameraX) * lerp;\n      this.cameraY += (targetCamY - this.cameraY) * lerp;\n\n      // Clamp camera\n      if (this.worldMap) {\n        const mapW = this.worldMap[0].length * TILE_SIZE;\n        const mapH = this.worldMap.length * TILE_SIZE;\n        this.cameraX = Math.max(0, Math.min(this.cameraX, mapW - this.canvas.width));\n        this.cameraY = Math.max(0, Math.min(this.cameraY, mapH - this.canvas.height));\n      }\n    },\n\n    render() {\n      if (!this.ctx || !this.canvas) return;\n      const ctx = this.ctx;\n      const w = this.canvas.width;\n      const h = this.canvas.height;\n\n      ctx.clearRect(0, 0, w, h);\n      ctx.save();\n      ctx.translate(-Math.floor(this.cameraX), -Math.floor(this.cameraY));\n\n      this.renderMap(ctx);\n      this.renderWorldItems(ctx);\n      this.renderNPCs(ctx);\n      this.renderOtherPlayers(ctx);\n      this.renderPlayer(ctx);\n      this.renderHoverHighlight(ctx);\n\n      ctx.restore();\n      \n      this.renderNightOverlay(ctx, w, h);\n    },\n\n    renderMap(ctx) {\n      if (!this.worldMap) return;\n\n      const startCol = Math.max(0, Math.floor(this.cameraX / TILE_SIZE) - 1);\n      const startRow = Math.max(0, Math.floor(this.cameraY / TILE_SIZE) - 1);\n      const endCol = Math.min(this.worldMap[0].length, startCol + Math.ceil(this.canvas.width / TILE_SIZE) + 2);\n      const endRow = Math.min(this.worldMap.length, startRow + Math.ceil(this.canvas.height / TILE_SIZE) + 2);\n\n      for (let row = startRow; row < endRow; row++) {\n        for (let col = startCol; col < endCol; col++) {\n          let tile = this.worldMap[row][col];\n          \n          // Check dynamic tiles\n          if (this.survival && this.survival.dynamicTiles) {\n            const dynamicTile = this.survival.dynamicTiles[`${col},${row}`];\n            if (dynamicTile !== undefined) tile = dynamicTile;\n          }\n\n          const px = col * TILE_SIZE;\n          const py = row * TILE_SIZE;\n\n          // Base tile color\n          ctx.fillStyle = TILE_COLORS[tile] || '#444';\n          ctx.fillRect(px, py, TILE_SIZE, TILE_SIZE);\n\n          // Tile details/decorations\n          this.renderTileDetail(ctx, tile, px, py, col, row);\n        }\n      }\n    },\n\n    renderTileDetail(ctx, tile, px, py, col, row) {\n      const t = this.animTick;\n\n      switch(tile) {\n        case 0: // Grass - subtle variation\n          if ((col + row) % 3 === 0) {\n            ctx.fillStyle = 'rgba(0,0,0,0.06)';\n            ctx.fillRect(px, py, TILE_SIZE, TILE_SIZE);\n          }\n          break;\n\n        case 1: // Water - animated\n          ctx.fillStyle = `rgba(100,160,255,${0.2 + Math.sin(t / 800 + col * 0.5 + row * 0.3) * 0.1})`;\n          ctx.fillRect(px, py, TILE_SIZE, TILE_SIZE);\n          // Ripple\n          ctx.strokeStyle = `rgba(200,230,255,${0.2 + Math.sin(t / 1000 + col + row) * 0.1})`;\n          ctx.lineWidth = 1;\n          ctx.beginPath();\n          ctx.moveTo(px + 4, py + 16 + Math.sin(t / 500 + col) * 2);\n          ctx.lineTo(px + 28, py + 16 + Math.sin(t / 500 + col + 1) * 2);\n          ctx.stroke();\n          break;\n\n        case 2: // Mountain - rocky texture\n          ctx.fillStyle = '#555555';\n          ctx.fillRect(px + 6, py + 8, 20, 16);\n          ctx.fillStyle = '#888888';\n          ctx.fillRect(px + 10, py + 4, 12, 10);\n          ctx.fillStyle = '#aaaaaa';\n          ctx.fillRect(px + 13, py, 6, 6);\n          break;\n\n        case 3: // Tree\n          // Trunk\n          ctx.fillStyle = '#5a3a1a';\n          ctx.fillRect(px + 13, py + 20, 6, 10);\n          // Canopy\n          ctx.fillStyle = '#1a5c1a';\n          ctx.beginPath();\n          ctx.arc(px + 16, py + 14, 12, 0, Math.PI * 2);\n          ctx.fill();\n          ctx.fillStyle = '#2a7a2a';\n          ctx.beginPath();\n          ctx.arc(px + 14, py + 12, 8, 0, Math.PI * 2);\n          ctx.fill();\n          break;\n\n        case 4: // Path - cobblestone\n          ctx.strokeStyle = 'rgba(0,0,0,0.15)';\n          ctx.lineWidth = 0.5;\n          for (let i = 0; i < 3; i++) {\n            for (let j = 0; j < 3; j++) {\n              ctx.strokeRect(px + 2 + i * 10, py + 2 + j * 10, 8, 8);\n            }\n          }\n          break;\n\n        case 5: // Wall - brick\n          ctx.fillStyle = '#8a6a48';\n          ctx.fillRect(px, py, TILE_SIZE, TILE_SIZE);\n          ctx.fillStyle = 'rgba(0,0,0,0.2)';\n          for (let i = 0; i < 3; i++) {\n            ctx.fillRect(px, py + i * 10 + 1, TILE_SIZE, 2);\n          }\n          break;\n\n        case 6: // Mine - dark entrance\n          ctx.fillStyle = '#222222';\n          ctx.fillRect(px + 6, py + 10, 20, 18);\n          // Mine entrance arch\n          ctx.fillStyle = '#1a1a1a';\n          ctx.beginPath();\n          ctx.arc(px + 16, py + 18, 10, Math.PI, 0);\n          ctx.fill();\n          // Pickaxe icon\n          ctx.fillStyle = '#888';\n          ctx.font = '14px serif';\n          ctx.fillText('â›', px + 9, py + 22);\n          break;\n\n        case 7: // Bank - golden building\n          ctx.fillStyle = '#c8a228';\n          ctx.fillRect(px + 2, py + 6, 28, 22);\n          ctx.fillStyle = '#f5d44a';\n          ctx.fillRect(px + 6, py + 2, 20, 6);\n          // Columns\n          ctx.fillStyle = '#a88822';\n          ctx.fillRect(px + 6, py + 8, 3, 18);\n          ctx.fillRect(px + 23, py + 8, 3, 18);\n          // Door\n          ctx.fillStyle = '#5a3a1a';\n          ctx.fillRect(px + 12, py + 18, 8, 10);\n          break;\n\n        case 8: // Shop - wooden building\n          ctx.fillStyle = '#8a5a30';\n          ctx.fillRect(px + 2, py + 8, 28, 20);\n          // Roof\n          ctx.fillStyle = '#c8701a';\n          ctx.beginPath();\n          ctx.moveTo(px, py + 10);\n          ctx.lineTo(px + 16, py);\n          ctx.lineTo(px + 32, py + 10);\n          ctx.fill();\n          // Window\n          ctx.fillStyle = '#88ccdd';\n          ctx.fillRect(px + 6, py + 12, 8, 8);\n          // Door\n          ctx.fillStyle = '#3a2010';\n          ctx.fillRect(px + 18, py + 18, 8, 10);\n          break;\n\n        case 10: // Flower\n          ctx.fillStyle = '#ff8800';\n          ctx.beginPath();\n          ctx.arc(px + 16, py + 16, 4, 0, Math.PI * 2);\n          ctx.fill();\n          ctx.fillStyle = '#ffdd00';\n          ctx.beginPath();\n          ctx.arc(px + 16, py + 16, 2, 0, Math.PI * 2);\n          ctx.fill();\n          break;\n      }\n\n      // Tile grid (subtle)\n      ctx.strokeStyle = 'rgba(0,0,0,0.05)';\n      ctx.lineWidth = 0.5;\n      ctx.strokeRect(px, py, TILE_SIZE, TILE_SIZE);\n    },\n\n    renderWorldItems(ctx) {\n      const t = this.animTick;\n      this.worldItems.forEach(item => {\n        const px = item.col * TILE_SIZE;\n        const py = item.row * TILE_SIZE;\n        const bobY = Math.sin(t / 600 + item.col * 0.7) * 2;\n\n        // Glow\n        ctx.shadowColor = item.color || '#ffffff';\n        ctx.shadowBlur = 8;\n        ctx.fillStyle = item.color || '#ffcc00';\n        ctx.beginPath();\n        ctx.arc(px + TILE_SIZE / 2, py + TILE_SIZE / 2 + bobY, 5, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.shadowBlur = 0;\n\n        // Emoji\n        ctx.font = '14px serif';\n        ctx.textAlign = 'center';\n        ctx.fillText(item.emoji || 'ðŸ“¦', px + 16, py + 20 + bobY);\n      });\n      ctx.textAlign = 'left';\n    },\n\n    renderNPCs(ctx) {\n      const t = this.animTick;\n      this.npcs.forEach(npc => {\n        const bobY = npc.moving ? Math.sin(t / 200) * 2 : 0;\n\n        // Shadow\n        ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        ctx.beginPath();\n        ctx.ellipse(npc.x, npc.y + 14, 12, 5, 0, 0, Math.PI * 2);\n        ctx.fill();\n\n        // NPC body\n        ctx.fillStyle = npc.color || '#4488cc';\n        ctx.beginPath();\n        ctx.arc(npc.x, npc.y - 2 + bobY, 14, 0, Math.PI * 2);\n        ctx.fill();\n\n        // NPC emoji\n        ctx.font = '18px serif';\n        ctx.textAlign = 'center';\n        ctx.fillText(npc.emoji || 'ðŸ‘¤', npc.x, npc.y + 7 + bobY);\n\n        // Name tag\n        ctx.font = 'bold 10px Inter, sans-serif';\n        ctx.textAlign = 'center';\n        const nameWidth = ctx.measureText(npc.name).width + 8;\n        ctx.fillStyle = 'rgba(0,0,0,0.6)';\n        ctx.fillRect(npc.x - nameWidth / 2, npc.y - 28 + bobY, nameWidth, 14);\n        ctx.fillStyle = '#ffffff';\n        ctx.fillText(npc.name, npc.x, npc.y - 17 + bobY);\n\n        // Type indicator\n        let typeIcon = '';\n        if (npc.type === 'shop') typeIcon = 'ðŸ›’';\n        else if (npc.type === 'bank') typeIcon = 'ðŸ¦';\n        if (typeIcon) {\n          ctx.font = '10px serif';\n          ctx.fillText(typeIcon, npc.x + 14, npc.y - 14 + bobY);\n        }\n      });\n      ctx.textAlign = 'left';\n    },\n\n    renderOtherPlayers(ctx) {\n      const t = this.animTick;\n      this.otherPlayers.forEach(p => {\n        this.renderCharacter(ctx, p, false, t);\n      });\n    },\n\n    renderPlayer(ctx) {\n      const p = this.player;\n      if (!p || !p.x) return;\n      this.renderCharacter(ctx, p, true, this.animTick);\n    },\n\n    renderCharacter(ctx, p, isMe, t) {\n      const px = p.x;\n      const py = p.y;\n\n      // Shadow\n      ctx.fillStyle = 'rgba(0,0,0,0.25)';\n      ctx.beginPath();\n      ctx.ellipse(px, py + 14, 12, 4, 0, 0, Math.PI * 2);\n      ctx.fill();\n\n      // Body (legs animation)\n      if (p.moving) {\n        // Left leg\n        ctx.fillStyle = '#333';\n        ctx.fillRect(px - 6, py + 4, 5, 10 + Math.sin(t / 150) * 4);\n        // Right leg\n        ctx.fillRect(px + 1, py + 4, 5, 10 - Math.sin(t / 150) * 4);\n      } else {\n        ctx.fillStyle = '#333';\n        ctx.fillRect(px - 6, py + 4, 11, 10);\n      }\n\n      // Torso\n      ctx.fillStyle = isMe ? '#2266cc' : '#cc6622';\n      ctx.fillRect(px - 9, py - 8, 18, 14);\n\n      // Head\n      ctx.fillStyle = '#ffcc99';\n      ctx.beginPath();\n      ctx.arc(px, py - 14, 10, 0, Math.PI * 2);\n      ctx.fill();\n\n      // Eyes based on direction\n      ctx.fillStyle = '#333';\n      if (p.direction === 'south' || !p.direction) {\n        ctx.beginPath();\n        ctx.arc(px - 3, py - 15, 2, 0, Math.PI * 2);\n        ctx.arc(px + 3, py - 15, 2, 0, Math.PI * 2);\n        ctx.fill();\n      } else if (p.direction === 'north') {\n        // Back of head, no eyes\n      } else if (p.direction === 'east') {\n        ctx.beginPath();\n        ctx.arc(px + 4, py - 14, 2, 0, Math.PI * 2);\n        ctx.fill();\n      } else if (p.direction === 'west') {\n        ctx.beginPath();\n        ctx.arc(px - 4, py - 14, 2, 0, Math.PI * 2);\n        ctx.fill();\n      }\n\n      // Player glow if \"me\"\n      if (isMe) {\n        const emotionColors = {\n          happy: 'rgba(255, 220, 0, 0.8)',\n          sad: 'rgba(0, 100, 255, 0.8)',\n          angry: 'rgba(255, 0, 0, 0.8)',\n          fear: 'rgba(150, 0, 255, 0.8)',\n          neutral: 'rgba(100, 180, 255, 0.8)',\n        };\n        const glowColor = emotionColors[p.emotion] || emotionColors.neutral;\n        \n        ctx.shadowColor = glowColor;\n        ctx.shadowBlur = 12;\n        ctx.strokeStyle = glowColor;\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.arc(px, py - 14, 12, 0, Math.PI * 2);\n        ctx.stroke();\n        ctx.shadowBlur = 0;\n      }\n\n      // Name tag\n      ctx.font = 'bold 11px Inter, sans-serif';\n      ctx.textAlign = 'center';\n      const nameW = ctx.measureText(p.name).width + 10;\n\n      ctx.fillStyle = isMe ? 'rgba(20,60,120,0.8)' : 'rgba(0,0,0,0.7)';\n      ctx.fillRect(px - nameW / 2, py - 34, nameW, 16);\n\n      ctx.fillStyle = isMe ? '#88ccff' : '#ffffff';\n      ctx.fillText(p.name, px, py - 22);\n\n      // Health bar\n      if (p.health !== undefined && p.maxHealth > 0) {\n        const barW = 32;\n        const barH = 3;\n        const barX = px - barW / 2;\n        const barY = py - 38;\n        const pct = p.health / p.maxHealth;\n\n        ctx.fillStyle = 'rgba(0,0,0,0.5)';\n        ctx.fillRect(barX, barY, barW, barH);\n        ctx.fillStyle = pct > 0.5 ? '#44dd44' : pct > 0.25 ? '#dddd44' : '#dd4444';\n        ctx.fillRect(barX, barY, barW * pct, barH);\n      }\n\n      ctx.textAlign = 'left';\n    },\n\n    renderHoverHighlight(ctx) {\n      if (this.mouseCol < 0 || this.mouseRow < 0) return;\n      const px = this.mouseCol * TILE_SIZE;\n      const py = this.mouseRow * TILE_SIZE;\n      ctx.strokeStyle = 'rgba(255,255,100,0.5)';\n      ctx.lineWidth = 2;\n      ctx.strokeRect(px + 1, py + 1, TILE_SIZE - 2, TILE_SIZE - 2);\n    },\n\n    renderNightOverlay(ctx, w, h) {\n      if (!this.survival) return;\n      const b = this.survival.brightness;\n      if (b >= 1) return;\n\n      ctx.fillStyle = `rgba(0, 0, 20, ${1 - b})`;\n      ctx.fillRect(0, 0, w, h);\n    },\n\n    // Convert screen coords to world tile\n    screenToTile(screenX, screenY) {\n      const worldX = screenX + this.cameraX;\n      const worldY = screenY + this.cameraY;\n      return {\n        col: Math.floor(worldX / TILE_SIZE),\n        row: Math.floor(worldY / TILE_SIZE),\n      };\n    },\n\n    handleClick(e) {\n      const rect = this.canvas.getBoundingClientRect();\n      const screenX = e.clientX - rect.left;\n      const screenY = e.clientY - rect.top;\n      const { col, row } = this.screenToTile(screenX, screenY);\n\n      // Check if clicking on an NPC\n      const clickedNPC = this.getNearbyEntity(col, row, 'npc');\n      if (clickedNPC) {\n        wsService.interact(clickedNPC.id, 'npc');\n        return;\n      }\n\n      // Check if clicking on a world item\n      const clickedItem = this.getNearbyEntity(col, row, 'item');\n      if (clickedItem) {\n        wsService.interact(clickedItem.id, 'item');\n        return;\n      }\n\n      // Otherwise move to that tile\n      wsService.moveRequest(col, row);\n    },\n\n    handleRightClick(e) {\n      const rect = this.canvas.getBoundingClientRect();\n      const screenX = e.clientX - rect.left;\n      const screenY = e.clientY - rect.top;\n      const { col, row } = this.screenToTile(screenX, screenY);\n\n      // Collect context options\n      const options = [];\n\n      // Check NPC\n      const npc = this.getNearbyEntity(col, row, 'npc');\n      if (npc) {\n        if (npc.type === 'shop') options.push({ label: `ðŸ›’ Trade with ${npc.name}`, action: () => wsService.interact(npc.id, 'npc') });\n        else if (npc.type === 'bank') options.push({ label: `ðŸ¦ Bank with ${npc.name}`, action: () => wsService.interact(npc.id, 'npc') });\n        else options.push({ label: `ðŸ’¬ Talk to ${npc.name}`, action: () => wsService.interact(npc.id, 'npc') });\n      }\n\n      // Check world item\n      const item = this.getNearbyEntity(col, row, 'item');\n      if (item) {\n        options.push({ label: `âœ‹ Pick up ${item.name}`, action: () => wsService.interact(item.id, 'item') });\n      }\n\n      // Check for resource zones\n      const zoneOption = this.getZoneOption(col, row);\n      if (zoneOption) options.push(zoneOption);\n\n      // Walk here\n      options.push({ label: `ðŸš¶ Walk here`, action: () => wsService.moveRequest(col, row) });\n\n      // Survival Options\n      if (this.survival && this.survival.dynamicTiles) {\n        const isDynamic = this.survival.dynamicTiles[`${col},${row}`] !== undefined;\n        if (isDynamic) {\n          options.push({ label: `â›ï¸ Mine this block`, action: () => wsService.action('mine', { args: [col, row] }) });\n        } else {\n          options.push({ label: 'ðŸ•³ï¸ Dig here', action: () => wsService.action('dig', { args: [col, row] }) });\n          \n          const hasWood = this.$store.state.inventory.items.some(i => i.defKey === 'WOOD');\n          if (hasWood) {\n            options.push({ label: 'ðŸ§± Place Wood', action: () => wsService.action('place', { args: ['wood', col, row] }) });\n          }\n          options.push({ label: 'ðŸ  Build Shelter', action: () => wsService.action('house', { args: [] }) });\n        }\n      }\n\n      // Show context menu\n      if (options.length > 0) {\n        this.$root.$emit('show-context-menu', {\n          event: e,\n          type: npc ? 'npc' : (item ? 'worldItem' : 'walk'),\n          npc,\n          worldItem: item,\n          options,\n          col,\n          row\n        });\n      }\n    },\n\n    handleMouseMove(e) {\n      const rect = this.canvas.getBoundingClientRect();\n      const { col, row } = this.screenToTile(e.clientX - rect.left, e.clientY - rect.top);\n      this.mouseCol = col;\n      this.mouseRow = row;\n    },\n\n    getNearbyEntity(col, row, type) {\n      const maxDist = 2;\n      if (type === 'npc') {\n        return this.npcs.find(n => Math.abs(n.col - col) <= maxDist && Math.abs(n.row - row) <= maxDist) || null;\n      }\n      if (type === 'item') {\n        return this.worldItems.find(i => Math.abs(i.col - col) <= maxDist && Math.abs(i.row - row) <= maxDist) || null;\n      }\n      return null;\n    },\n\n    getZoneOption(col, row) {\n      // Match to respawn zones\n      const zones = {\n        FOREST_1: { col: 14, row: 2, radius: 2, label: 'ðŸª“ Chop Wood' },\n        FOREST_2: { col: 26, row: 3, radius: 2, label: 'ðŸª“ Chop Wood' },\n        DIG_SITE: { col: 7, row: 8, radius: 2, label: 'â›ï¸ Dig for Gems' },\n        IRON_MINE: { col: 5, row: 5, radius: 3, label: 'â›ï¸ Mine Iron Ore' },\n        GOLD_MINE: { col: 8, row: 3, radius: 2, label: 'â›ï¸ Mine Gold Ore' },\n        FISHING_SPOT: { col: 2, row: 18, radius: 2, label: 'ðŸŽ£ Fish here' },\n        GRAVEYARD: { col: 34, row: 26, radius: 3, label: 'ðŸ¦´ Gather bones' },\n        SHEEP_FLOCK: { col: 22, row: 8, radius: 3, label: 'âš”ï¸ Attack Sheep' },\n        CREEPER_NEST: { col: 10, row: 20, radius: 2, label: 'ðŸ’¥ Kill Creeper' },\n      };\n\n      for (const [key, zone] of Object.entries(zones)) {\n        if (Math.abs(col - zone.col) <= zone.radius && Math.abs(row - zone.row) <= zone.radius) {\n          return {\n            label: zone.label,\n            action: () => wsService.gather(null, key),\n          };\n        }\n      }\n      return null;\n    },\n  },\n};\n</script>\n\n<style scoped>\n#game-canvas {\n  display: block;\n  width: 100%;\n  height: 100%;\n  cursor: crosshair;\n  image-rendering: pixelated;\n  image-rendering: crisp-edges;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}