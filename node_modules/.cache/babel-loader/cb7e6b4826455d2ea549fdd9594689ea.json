{"remainingRequest":"/home/justin/Desktop/CICMS/node_modules/babel-loader/lib/index.js!/home/justin/Desktop/CICMS/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/justin/Desktop/CICMS/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/justin/Desktop/CICMS/src/components/ChatLog.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/justin/Desktop/CICMS/src/components/ChatLog.vue","mtime":1771869865113},{"path":"/home/justin/Desktop/CICMS/babel.config.js","mtime":1771823009049},{"path":"/home/justin/Desktop/CICMS/node_modules/cache-loader/dist/cjs.js","mtime":1771824225125},{"path":"/home/justin/Desktop/CICMS/node_modules/babel-loader/lib/index.js","mtime":1771824228601},{"path":"/home/justin/Desktop/CICMS/node_modules/cache-loader/dist/cjs.js","mtime":1771824225125},{"path":"/home/justin/Desktop/CICMS/node_modules/vue-loader/lib/index.js","mtime":1771824228358}],"contextDependencies":[],"result":["import { mapState } from 'vuex';\nimport wsService from '../services/websocket';\nimport { CommandPrompt } from '../utils/CommandPrompt';\nconst commandPrompt = new CommandPrompt();\nexport default {\n  name: 'ChatLog',\n  data() {\n    return {\n      inputMsg: '',\n      suggestions: [],\n      selectedSuggestion: 0\n    };\n  },\n  computed: {\n    ...mapState('chat', ['messages']),\n    ...mapState('player', {\n      myId: 'id'\n    })\n  },\n  watch: {\n    messages() {\n      this.$nextTick(this.scrollToBottom);\n    }\n  },\n  mounted() {\n    this.scrollToBottom();\n  },\n  methods: {\n    formatTime(ts) {\n      if (!ts) return '';\n      const date = new Date(ts);\n      return date.getHours().toString().padStart(2, '0') + ':' + date.getMinutes().toString().padStart(2, '0');\n    },\n    sendMessage() {\n      const msg = this.inputMsg.trim();\n      if (!msg) return;\n      if (msg.startsWith('/')) {\n        const parts = msg.substring(1).split(' ');\n        if (parts.length > 0 && parts[0]) {\n          wsService.action('COMMAND', {\n            command: parts[0].toLowerCase(),\n            args: parts.slice(1)\n          });\n        }\n      } else {\n        wsService.chat(msg);\n      }\n      this.inputMsg = '';\n      this.suggestions = [];\n    },\n    onInput() {\n      if (this.inputMsg.startsWith('/')) {\n        const itemIds = ['wood', 'ruby', 'diamond', 'iron_sword', 'pickaxe']; // Minimal list\n        this.suggestions = commandPrompt.getSuggestions(this.inputMsg, itemIds);\n        this.selectedSuggestion = 0;\n      } else {\n        this.suggestions = [];\n      }\n    },\n    onTab() {\n      if (this.suggestions.length > 0) {\n        this.inputMsg = this.suggestions[this.selectedSuggestion].text + ' ';\n        this.onInput();\n      }\n    },\n    onArrowUp() {\n      if (this.suggestions.length > 0) {\n        this.selectedSuggestion = Math.max(0, this.selectedSuggestion - 1);\n      }\n    },\n    onArrowDown() {\n      if (this.suggestions.length > 0) {\n        this.selectedSuggestion = Math.min(this.suggestions.length - 1, this.selectedSuggestion + 1);\n      }\n    },\n    selectSuggestion(index) {\n      this.inputMsg = this.suggestions[index].text + ' ';\n      this.onInput();\n      this.$el.querySelector('input').focus();\n    },\n    scrollToBottom() {\n      const box = this.$refs.messageBox;\n      if (box) box.scrollTop = box.scrollHeight;\n    }\n  }\n};",{"version":3,"names":["mapState","wsService","CommandPrompt","commandPrompt","name","data","inputMsg","suggestions","selectedSuggestion","computed","myId","watch","messages","$nextTick","scrollToBottom","mounted","methods","formatTime","ts","date","Date","getHours","toString","padStart","getMinutes","sendMessage","msg","trim","startsWith","parts","substring","split","length","action","command","toLowerCase","args","slice","chat","onInput","itemIds","getSuggestions","onTab","text","onArrowUp","Math","max","onArrowDown","min","selectSuggestion","index","$el","querySelector","focus","box","$refs","messageBox","scrollTop","scrollHeight"],"sources":["src/components/ChatLog.vue"],"sourcesContent":["<template>\n  <div class=\"chat-log\">\n    <div class=\"chat-messages\" ref=\"messageBox\">\n      <div\n        v-for=\"msg in messages\"\n        :key=\"msg.id\"\n        class=\"chat-entry\"\n      >\n        <span class=\"chat-time\">[{{ formatTime(msg.timestamp) }}]</span>\n        <span class=\"chat-name\" :class=\"{ self: msg.playerId === myId }\">{{ msg.playerName }}:</span>\n        <span class=\"chat-text\">{{ msg.message }}</span>\n      </div>\n    </div>\n    <div class=\"chat-input-container\">\n      <div v-if=\"suggestions.length > 0\" class=\"suggestions-box\">\n        <div \n          v-for=\"(sug, index) in suggestions\" \n          :key=\"index\"\n          class=\"suggestion-item\"\n          :class=\"{ selected: index === selectedSuggestion }\"\n          @click=\"selectSuggestion(index)\"\n        >\n          <span class=\"sug-text\">{{ sug.text }}</span>\n          <span class=\"sug-desc\">{{ sug.description }}</span>\n        </div>\n      </div>\n      <input\n        v-model=\"inputMsg\"\n        type=\"text\"\n        placeholder=\"Type to chat or / commands...\"\n        maxlength=\"100\"\n        @keyup.enter=\"sendMessage\"\n        @keydown.tab.prevent=\"onTab\"\n        @keydown.up.prevent=\"onArrowUp\"\n        @keydown.down.prevent=\"onArrowDown\"\n        @input=\"onInput\"\n        spellcheck=\"false\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport wsService from '../services/websocket';\nimport { CommandPrompt } from '../utils/CommandPrompt';\n\nconst commandPrompt = new CommandPrompt();\n\nexport default {\n  name: 'ChatLog',\n  data() {\n    return {\n      inputMsg: '',\n      suggestions: [],\n      selectedSuggestion: 0,\n    };\n  },\n  computed: {\n    ...mapState('chat', ['messages']),\n    ...mapState('player', { myId: 'id' }),\n  },\n  watch: {\n    messages() {\n      this.$nextTick(this.scrollToBottom);\n    },\n  },\n  mounted() {\n    this.scrollToBottom();\n  },\n  methods: {\n    formatTime(ts) {\n      if (!ts) return '';\n      const date = new Date(ts);\n      return date.getHours().toString().padStart(2, '0') + ':' +\n             date.getMinutes().toString().padStart(2, '0');\n    },\n    sendMessage() {\n      const msg = this.inputMsg.trim();\n      if (!msg) return;\n      \n      if (msg.startsWith('/')) {\n        const parts = msg.substring(1).split(' ');\n        if (parts.length > 0 && parts[0]) {\n            wsService.action('COMMAND', { command: parts[0].toLowerCase(), args: parts.slice(1) });\n        }\n      } else {\n        wsService.chat(msg);\n      }\n      \n      this.inputMsg = '';\n      this.suggestions = [];\n    },\n    onInput() {\n      if (this.inputMsg.startsWith('/')) {\n         const itemIds = ['wood', 'ruby', 'diamond', 'iron_sword', 'pickaxe']; // Minimal list\n         this.suggestions = commandPrompt.getSuggestions(this.inputMsg, itemIds);\n         this.selectedSuggestion = 0;\n      } else {\n         this.suggestions = [];\n      }\n    },\n    onTab() {\n      if (this.suggestions.length > 0) {\n        this.inputMsg = this.suggestions[this.selectedSuggestion].text + ' ';\n        this.onInput();\n      }\n    },\n    onArrowUp() {\n      if (this.suggestions.length > 0) {\n        this.selectedSuggestion = Math.max(0, this.selectedSuggestion - 1);\n      }\n    },\n    onArrowDown() {\n      if (this.suggestions.length > 0) {\n        this.selectedSuggestion = Math.min(this.suggestions.length - 1, this.selectedSuggestion + 1);\n      }\n    },\n    selectSuggestion(index) {\n        this.inputMsg = this.suggestions[index].text + ' ';\n        this.onInput();\n        this.$el.querySelector('input').focus();\n    },\n    scrollToBottom() {\n      const box = this.$refs.messageBox;\n      if (box) box.scrollTop = box.scrollHeight;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.chat-log {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  background: rgba(0, 0, 0, 0.4);\n  overflow: hidden;\n  height: 300px;\n}\n\n.chat-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.chat-entry {\n  font-size: 12px;\n  line-height: 1.4;\n  word-wrap: break-word;\n}\n\n.chat-time {\n  color: rgba(255, 255, 255, 0.3);\n  margin-right: 6px;\n}\n\n.chat-name {\n  font-weight: 700;\n  color: #4a90e2;\n  margin-right: 6px;\n}\n\n.chat-name.self {\n  color: #f5d44a;\n}\n\n.chat-text {\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.chat-input-container {\n  position: relative;\n  padding: 8px;\n  background: rgba(0, 0, 0, 0.2);\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.suggestions-box {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  right: 0;\n  background: rgba(20, 20, 30, 0.95);\n  border: 1px solid rgba(255, 200, 50, 0.3);\n  border-radius: 4px 4px 0 0;\n  max-height: 150px;\n  overflow-y: auto;\n  z-index: 10;\n  display: flex;\n  flex-direction: column;\n}\n\n.suggestion-item {\n  padding: 6px 10px;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.suggestion-item:hover, .suggestion-item.selected {\n  background: rgba(255, 200, 50, 0.2);\n  color: #f5d44a;\n}\n\n.sug-text {\n  font-weight: 600;\n}\n\n.sug-desc {\n  opacity: 0.6;\n  font-size: 11px;\n}\n\n.chat-input-container input {\n  width: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  border: 1px solid rgba(255, 200, 50, 0.2);\n  border-radius: 4px;\n  padding: 6px 10px;\n  color: white;\n  font-size: 12px;\n  outline: none;\n  box-sizing: border-box;\n}\n\n.chat-input-container input:focus {\n  border-color: rgba(255, 200, 50, 0.5);\n}\n</style>\n"],"mappings":"AA2CA,SAAAA,QAAA;AACA,OAAAC,SAAA;AACA,SAAAC,aAAA;AAEA,MAAAC,aAAA,OAAAD,aAAA;AAEA;EACAE,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,WAAA;MACAC,kBAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAT,QAAA;IACA,GAAAA,QAAA;MAAAU,IAAA;IAAA;EACA;EACAC,KAAA;IACAC,SAAA;MACA,KAAAC,SAAA,MAAAC,cAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAD,cAAA;EACA;EACAE,OAAA;IACAC,WAAAC,EAAA;MACA,KAAAA,EAAA;MACA,MAAAC,IAAA,OAAAC,IAAA,CAAAF,EAAA;MACA,OAAAC,IAAA,CAAAE,QAAA,GAAAC,QAAA,GAAAC,QAAA,iBACAJ,IAAA,CAAAK,UAAA,GAAAF,QAAA,GAAAC,QAAA;IACA;IACAE,YAAA;MACA,MAAAC,GAAA,QAAApB,QAAA,CAAAqB,IAAA;MACA,KAAAD,GAAA;MAEA,IAAAA,GAAA,CAAAE,UAAA;QACA,MAAAC,KAAA,GAAAH,GAAA,CAAAI,SAAA,IAAAC,KAAA;QACA,IAAAF,KAAA,CAAAG,MAAA,QAAAH,KAAA;UACA5B,SAAA,CAAAgC,MAAA;YAAAC,OAAA,EAAAL,KAAA,IAAAM,WAAA;YAAAC,IAAA,EAAAP,KAAA,CAAAQ,KAAA;UAAA;QACA;MACA;QACApC,SAAA,CAAAqC,IAAA,CAAAZ,GAAA;MACA;MAEA,KAAApB,QAAA;MACA,KAAAC,WAAA;IACA;IACAgC,QAAA;MACA,SAAAjC,QAAA,CAAAsB,UAAA;QACA,MAAAY,OAAA;QACA,KAAAjC,WAAA,GAAAJ,aAAA,CAAAsC,cAAA,MAAAnC,QAAA,EAAAkC,OAAA;QACA,KAAAhC,kBAAA;MACA;QACA,KAAAD,WAAA;MACA;IACA;IACAmC,MAAA;MACA,SAAAnC,WAAA,CAAAyB,MAAA;QACA,KAAA1B,QAAA,QAAAC,WAAA,MAAAC,kBAAA,EAAAmC,IAAA;QACA,KAAAJ,OAAA;MACA;IACA;IACAK,UAAA;MACA,SAAArC,WAAA,CAAAyB,MAAA;QACA,KAAAxB,kBAAA,GAAAqC,IAAA,CAAAC,GAAA,SAAAtC,kBAAA;MACA;IACA;IACAuC,YAAA;MACA,SAAAxC,WAAA,CAAAyB,MAAA;QACA,KAAAxB,kBAAA,GAAAqC,IAAA,CAAAG,GAAA,MAAAzC,WAAA,CAAAyB,MAAA,WAAAxB,kBAAA;MACA;IACA;IACAyC,iBAAAC,KAAA;MACA,KAAA5C,QAAA,QAAAC,WAAA,CAAA2C,KAAA,EAAAP,IAAA;MACA,KAAAJ,OAAA;MACA,KAAAY,GAAA,CAAAC,aAAA,UAAAC,KAAA;IACA;IACAvC,eAAA;MACA,MAAAwC,GAAA,QAAAC,KAAA,CAAAC,UAAA;MACA,IAAAF,GAAA,EAAAA,GAAA,CAAAG,SAAA,GAAAH,GAAA,CAAAI,YAAA;IACA;EACA;AACA","ignoreList":[]}]}