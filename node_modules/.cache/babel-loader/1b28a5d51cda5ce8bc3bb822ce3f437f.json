{"remainingRequest":"/home/justin/Desktop/CICMS/node_modules/thread-loader/dist/cjs.js!/home/justin/Desktop/CICMS/node_modules/babel-loader/lib/index.js!/home/justin/Desktop/CICMS/node_modules/eslint-loader/index.js??ref--13-0!/home/justin/Desktop/CICMS/src/services/websocket.js","dependencies":[{"path":"/home/justin/Desktop/CICMS/src/services/websocket.js","mtime":1771827414940},{"path":"/home/justin/Desktop/CICMS/babel.config.js","mtime":1771823009049},{"path":"/home/justin/Desktop/CICMS/node_modules/cache-loader/dist/cjs.js","mtime":1771824225125},{"path":"/home/justin/Desktop/CICMS/node_modules/thread-loader/dist/cjs.js","mtime":1771824225135},{"path":"/home/justin/Desktop/CICMS/node_modules/babel-loader/lib/index.js","mtime":1771824228601},{"path":"/home/justin/Desktop/CICMS/node_modules/eslint-loader/index.js","mtime":1771824225547}],"contextDependencies":[],"result":["import store from '../store';\nconst isProd = process.env.NODE_ENV === 'production';\nconst WS_HOST = window.location.hostname;\nconst WS_PROTOCOL = window.location.protocol === 'https:' ? 'wss' : 'ws';\n// In dev, the server is on 6500. In prod, it's served on the same port as the frontend.\nconst WS_PORT = isProd ? window.location.port : 6500;\nconst WS_URL = `${WS_PROTOCOL}://${WS_HOST}${WS_PORT ? ':' + WS_PORT : ''}`;\nclass WebSocketService {\n  constructor() {\n    this.ws = null;\n    this.reconnectTimer = null;\n    this.reconnectDelay = 2000;\n    this.maxReconnectDelay = 30000;\n    this.onMessageCallbacks = new Map();\n    this.myPlayerId = null;\n  }\n  connect(playerName) {\n    return new Promise((resolve, reject) => {\n      try {\n        this.ws = new WebSocket(WS_URL);\n        this.ws.onopen = () => {\n          console.log('[WS] Connected to Delaford server');\n          store.commit('player/SET_CONNECTED', true);\n          this.reconnectDelay = 2000;\n\n          // Send join message\n          this.send({\n            type: 'JOIN_GAME',\n            playerName\n          });\n        };\n        this.ws.onmessage = event => {\n          try {\n            const data = JSON.parse(event.data);\n            this.handleMessage(data, resolve, reject);\n          } catch (e) {\n            console.error('[WS] Parse error:', e);\n          }\n        };\n        this.ws.onclose = () => {\n          console.log('[WS] Connection closed');\n          store.commit('player/SET_CONNECTED', false);\n          this.scheduleReconnect(playerName);\n        };\n        this.ws.onerror = err => {\n          console.error('[WS] Error:', err);\n          reject(new Error('Connection failed. Is the server running?'));\n        };\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n  handleMessage(data, joinResolve, joinReject) {\n    const {\n      type\n    } = data;\n    switch (type) {\n      case 'JOIN_SUCCESS':\n        {\n          this.myPlayerId = data.player.id;\n          store.dispatch('player/initPlayer', data.player);\n          store.dispatch('inventory/updateInventory', {\n            items: data.player.inventory,\n            equipment: data.player.equipment,\n            bank: data.player.bank\n          });\n          store.dispatch('world/setWorldState', data.worldState);\n          store.dispatch('chat/setChatHistory', data.worldState.chatHistory);\n          store.dispatch('chat/addActionLog', {\n            message: `Connected to Delaford! (${data.worldState.players.length} player(s) online)`,\n            type: 'success'\n          });\n          if (joinResolve) joinResolve(data.player);\n          break;\n        }\n      case 'WORLD_UPDATE':\n        {\n          // Filter out our own data from others\n          const otherPlayers = (data.players || []).filter(p => p.id !== this.myPlayerId);\n          store.dispatch('world/updateWorld', {\n            players: otherPlayers,\n            npcs: data.npcs,\n            items: data.items\n          });\n\n          // Update our own position if included\n          const myData = (data.players || []).find(p => p.id === this.myPlayerId);\n          if (myData) {\n            store.commit('player/SET_POSITION', myData);\n          }\n          break;\n        }\n      case 'PLAYER_JOINED':\n        {\n          if (data.player.id !== this.myPlayerId) {\n            store.dispatch('world/playerJoined', data.player);\n            store.dispatch('chat/addActionLog', {\n              message: `${data.player.name} joined the game.`,\n              type: 'info'\n            });\n          }\n          break;\n        }\n      case 'PLAYER_LEFT':\n        {\n          store.dispatch('world/playerLeft', data.playerId);\n          store.dispatch('chat/addActionLog', {\n            message: `${data.playerName} left the game.`,\n            type: 'info'\n          });\n          break;\n        }\n      case 'INVENTORY_UPDATED':\n        {\n          store.dispatch('inventory/updateInventory', {\n            items: data.inventory,\n            equipment: data.equipment,\n            bank: data.bank\n          });\n          store.dispatch('player/updateStats', {\n            gold: data.gold,\n            health: data.health,\n            maxHealth: data.maxHealth,\n            mana: data.mana,\n            maxMana: data.maxMana\n          });\n          if (data.skills) {\n            store.dispatch('player/updateSkills', data.skills);\n          }\n          break;\n        }\n      case 'CHAT_MESSAGE':\n        {\n          store.dispatch('chat/addMessage', data);\n          break;\n        }\n      case 'ACTION_RESULT':\n        {\n          store.dispatch('chat/addActionLog', {\n            message: data.message,\n            type: data.success ? 'success' : 'error'\n          });\n          // Emit custom event for components\n          this.emit('ACTION_RESULT', data);\n          break;\n        }\n      case 'ACTION_LOG':\n        {\n          store.dispatch('chat/addActionLog', {\n            message: data.message,\n            type: 'info'\n          });\n          break;\n        }\n      case 'INTERACT_RESULT':\n        {\n          if (data.targetType === 'npc') {\n            store.dispatch('world/interactWith', data.npc);\n          }\n          break;\n        }\n      case 'ITEM_REMOVED':\n        {\n          store.dispatch('world/removeWorldItem', data.itemId);\n          break;\n        }\n      case 'MOVE_ACK':\n        {\n          // Path acknowledged - no action needed, server drives movement\n          break;\n        }\n      case 'LEVEL_UP':\n        {\n          store.dispatch('chat/addActionLog', {\n            message: data.message,\n            type: 'levelup'\n          });\n          this.emit('LEVEL_UP', data);\n          break;\n        }\n      case 'ERROR':\n        {\n          store.dispatch('chat/addActionLog', {\n            message: `Error: ${data.message}`,\n            type: 'error'\n          });\n          if (joinReject) joinReject(new Error(data.message));\n          break;\n        }\n      default:\n        // console.log('[WS] Unhandled message type:', type);\n        break;\n    }\n\n    // Call any registered callbacks\n    if (this.onMessageCallbacks.has(type)) {\n      this.onMessageCallbacks.get(type).forEach(cb => cb(data));\n    }\n  }\n  on(type, callback) {\n    if (!this.onMessageCallbacks.has(type)) {\n      this.onMessageCallbacks.set(type, []);\n    }\n    this.onMessageCallbacks.get(type).push(callback);\n  }\n  off(type, callback) {\n    if (!this.onMessageCallbacks.has(type)) return;\n    const cbs = this.onMessageCallbacks.get(type);\n    const idx = cbs.indexOf(callback);\n    if (idx !== -1) cbs.splice(idx, 1);\n  }\n  emit(type, data) {\n    if (this.onMessageCallbacks.has(type)) {\n      this.onMessageCallbacks.get(type).forEach(cb => cb(data));\n    }\n  }\n  send(data) {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify(data));\n    } else {\n      console.warn('[WS] Not connected, cannot send:', data.type);\n    }\n  }\n  moveRequest(targetCol, targetRow) {\n    this.send({\n      type: 'MOVE',\n      targetCol,\n      targetRow\n    });\n  }\n  interact(targetId, targetType) {\n    this.send({\n      type: 'INTERACT',\n      targetId,\n      targetType\n    });\n  }\n  action(action, payload = {}) {\n    this.send({\n      type: 'ACTION',\n      action,\n      ...payload\n    });\n  }\n  chat(message) {\n    this.send({\n      type: 'CHAT',\n      message\n    });\n  }\n  equip(itemId) {\n    this.send({\n      type: 'EQUIP',\n      itemId\n    });\n  }\n  unequip(slot) {\n    this.send({\n      type: 'UNEQUIP',\n      slot\n    });\n  }\n  consume(itemId) {\n    this.send({\n      type: 'CONSUME',\n      itemId\n    });\n  }\n  bankAction(npcId, action, itemId, quantity) {\n    this.send({\n      type: 'BANK_ACTION',\n      npcId,\n      action,\n      itemId,\n      quantity\n    });\n  }\n  gather(worldItemId, zoneKey) {\n    this.send({\n      type: 'GATHER',\n      worldItemId,\n      zoneKey\n    });\n  }\n  scheduleReconnect(playerName) {\n    if (this.reconnectTimer) return;\n    store.dispatch('chat/addActionLog', {\n      message: `Connection lost. Reconnecting in ${this.reconnectDelay / 1000}s...`,\n      type: 'error'\n    });\n    this.reconnectTimer = setTimeout(() => {\n      this.reconnectTimer = null;\n      this.reconnectDelay = Math.min(this.reconnectDelay * 1.5, this.maxReconnectDelay);\n      if (playerName) {\n        this.connect(playerName).catch(() => {});\n      }\n    }, this.reconnectDelay);\n  }\n  disconnect() {\n    if (this.reconnectTimer) {\n      clearTimeout(this.reconnectTimer);\n      this.reconnectTimer = null;\n    }\n    if (this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n  }\n  get isConnected() {\n    return this.ws && this.ws.readyState === WebSocket.OPEN;\n  }\n}\nexport const wsService = new WebSocketService();\nexport default wsService;",{"version":3,"names":["store","isProd","process","env","NODE_ENV","WS_HOST","window","location","hostname","WS_PROTOCOL","protocol","WS_PORT","port","WS_URL","WebSocketService","constructor","ws","reconnectTimer","reconnectDelay","maxReconnectDelay","onMessageCallbacks","Map","myPlayerId","connect","playerName","Promise","resolve","reject","WebSocket","onopen","console","log","commit","send","type","onmessage","event","data","JSON","parse","handleMessage","e","error","onclose","scheduleReconnect","onerror","err","Error","joinResolve","joinReject","player","id","dispatch","items","inventory","equipment","bank","worldState","chatHistory","message","players","length","otherPlayers","filter","p","npcs","myData","find","name","playerId","gold","health","maxHealth","mana","maxMana","skills","success","emit","targetType","npc","itemId","has","get","forEach","cb","on","callback","set","push","off","cbs","idx","indexOf","splice","readyState","OPEN","stringify","warn","moveRequest","targetCol","targetRow","interact","targetId","action","payload","chat","equip","unequip","slot","consume","bankAction","npcId","quantity","gather","worldItemId","zoneKey","setTimeout","Math","min","catch","disconnect","clearTimeout","close","isConnected","wsService"],"sources":["/home/justin/Desktop/CICMS/src/services/websocket.js"],"sourcesContent":["import store from '../store';\n\nconst isProd = process.env.NODE_ENV === 'production';\nconst WS_HOST = window.location.hostname;\nconst WS_PROTOCOL = window.location.protocol === 'https:' ? 'wss' : 'ws';\n// In dev, the server is on 6500. In prod, it's served on the same port as the frontend.\nconst WS_PORT = isProd ? window.location.port : 6500;\nconst WS_URL = `${WS_PROTOCOL}://${WS_HOST}${WS_PORT ? ':' + WS_PORT : ''}`;\n\nclass WebSocketService {\n    constructor() {\n        this.ws = null;\n        this.reconnectTimer = null;\n        this.reconnectDelay = 2000;\n        this.maxReconnectDelay = 30000;\n        this.onMessageCallbacks = new Map();\n        this.myPlayerId = null;\n    }\n\n    connect(playerName) {\n        return new Promise((resolve, reject) => {\n            try {\n                this.ws = new WebSocket(WS_URL);\n\n                this.ws.onopen = () => {\n                    console.log('[WS] Connected to Delaford server');\n                    store.commit('player/SET_CONNECTED', true);\n                    this.reconnectDelay = 2000;\n\n                    // Send join message\n                    this.send({\n                        type: 'JOIN_GAME',\n                        playerName,\n                    });\n                };\n\n                this.ws.onmessage = (event) => {\n                    try {\n                        const data = JSON.parse(event.data);\n                        this.handleMessage(data, resolve, reject);\n                    } catch (e) {\n                        console.error('[WS] Parse error:', e);\n                    }\n                };\n\n                this.ws.onclose = () => {\n                    console.log('[WS] Connection closed');\n                    store.commit('player/SET_CONNECTED', false);\n                    this.scheduleReconnect(playerName);\n                };\n\n                this.ws.onerror = (err) => {\n                    console.error('[WS] Error:', err);\n                    reject(new Error('Connection failed. Is the server running?'));\n                };\n\n            } catch (e) {\n                reject(e);\n            }\n        });\n    }\n\n    handleMessage(data, joinResolve, joinReject) {\n        const { type } = data;\n\n        switch (type) {\n            case 'JOIN_SUCCESS': {\n                this.myPlayerId = data.player.id;\n                store.dispatch('player/initPlayer', data.player);\n                store.dispatch('inventory/updateInventory', {\n                    items: data.player.inventory,\n                    equipment: data.player.equipment,\n                    bank: data.player.bank,\n                });\n                store.dispatch('world/setWorldState', data.worldState);\n                store.dispatch('chat/setChatHistory', data.worldState.chatHistory);\n                store.dispatch('chat/addActionLog', {\n                    message: `Connected to Delaford! (${data.worldState.players.length} player(s) online)`,\n                    type: 'success',\n                });\n                if (joinResolve) joinResolve(data.player);\n                break;\n            }\n\n            case 'WORLD_UPDATE': {\n                // Filter out our own data from others\n                const otherPlayers = (data.players || []).filter(p => p.id !== this.myPlayerId);\n                store.dispatch('world/updateWorld', {\n                    players: otherPlayers,\n                    npcs: data.npcs,\n                    items: data.items,\n                });\n\n                // Update our own position if included\n                const myData = (data.players || []).find(p => p.id === this.myPlayerId);\n                if (myData) {\n                    store.commit('player/SET_POSITION', myData);\n                }\n                break;\n            }\n\n            case 'PLAYER_JOINED': {\n                if (data.player.id !== this.myPlayerId) {\n                    store.dispatch('world/playerJoined', data.player);\n                    store.dispatch('chat/addActionLog', {\n                        message: `${data.player.name} joined the game.`,\n                        type: 'info',\n                    });\n                }\n                break;\n            }\n\n            case 'PLAYER_LEFT': {\n                store.dispatch('world/playerLeft', data.playerId);\n                store.dispatch('chat/addActionLog', {\n                    message: `${data.playerName} left the game.`,\n                    type: 'info',\n                });\n                break;\n            }\n\n            case 'INVENTORY_UPDATED': {\n                store.dispatch('inventory/updateInventory', {\n                    items: data.inventory,\n                    equipment: data.equipment,\n                    bank: data.bank,\n                });\n                store.dispatch('player/updateStats', {\n                    gold: data.gold,\n                    health: data.health,\n                    maxHealth: data.maxHealth,\n                    mana: data.mana,\n                    maxMana: data.maxMana,\n                });\n                if (data.skills) {\n                    store.dispatch('player/updateSkills', data.skills);\n                }\n                break;\n            }\n\n            case 'CHAT_MESSAGE': {\n                store.dispatch('chat/addMessage', data);\n                break;\n            }\n\n            case 'ACTION_RESULT': {\n                store.dispatch('chat/addActionLog', {\n                    message: data.message,\n                    type: data.success ? 'success' : 'error',\n                });\n                // Emit custom event for components\n                this.emit('ACTION_RESULT', data);\n                break;\n            }\n\n            case 'ACTION_LOG': {\n                store.dispatch('chat/addActionLog', {\n                    message: data.message,\n                    type: 'info',\n                });\n                break;\n            }\n\n            case 'INTERACT_RESULT': {\n                if (data.targetType === 'npc') {\n                    store.dispatch('world/interactWith', data.npc);\n                }\n                break;\n            }\n\n            case 'ITEM_REMOVED': {\n                store.dispatch('world/removeWorldItem', data.itemId);\n                break;\n            }\n\n            case 'MOVE_ACK': {\n                // Path acknowledged - no action needed, server drives movement\n                break;\n            }\n\n            case 'LEVEL_UP': {\n                store.dispatch('chat/addActionLog', {\n                    message: data.message,\n                    type: 'levelup',\n                });\n                this.emit('LEVEL_UP', data);\n                break;\n            }\n\n            case 'ERROR': {\n                store.dispatch('chat/addActionLog', {\n                    message: `Error: ${data.message}`,\n                    type: 'error',\n                });\n                if (joinReject) joinReject(new Error(data.message));\n                break;\n            }\n\n            default:\n                // console.log('[WS] Unhandled message type:', type);\n                break;\n        }\n\n        // Call any registered callbacks\n        if (this.onMessageCallbacks.has(type)) {\n            this.onMessageCallbacks.get(type).forEach(cb => cb(data));\n        }\n    }\n\n    on(type, callback) {\n        if (!this.onMessageCallbacks.has(type)) {\n            this.onMessageCallbacks.set(type, []);\n        }\n        this.onMessageCallbacks.get(type).push(callback);\n    }\n\n    off(type, callback) {\n        if (!this.onMessageCallbacks.has(type)) return;\n        const cbs = this.onMessageCallbacks.get(type);\n        const idx = cbs.indexOf(callback);\n        if (idx !== -1) cbs.splice(idx, 1);\n    }\n\n    emit(type, data) {\n        if (this.onMessageCallbacks.has(type)) {\n            this.onMessageCallbacks.get(type).forEach(cb => cb(data));\n        }\n    }\n\n    send(data) {\n        if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n            this.ws.send(JSON.stringify(data));\n        } else {\n            console.warn('[WS] Not connected, cannot send:', data.type);\n        }\n    }\n\n    moveRequest(targetCol, targetRow) {\n        this.send({ type: 'MOVE', targetCol, targetRow });\n    }\n\n    interact(targetId, targetType) {\n        this.send({ type: 'INTERACT', targetId, targetType });\n    }\n\n    action(action, payload = {}) {\n        this.send({ type: 'ACTION', action, ...payload });\n    }\n\n    chat(message) {\n        this.send({ type: 'CHAT', message });\n    }\n\n    equip(itemId) {\n        this.send({ type: 'EQUIP', itemId });\n    }\n\n    unequip(slot) {\n        this.send({ type: 'UNEQUIP', slot });\n    }\n\n    consume(itemId) {\n        this.send({ type: 'CONSUME', itemId });\n    }\n\n    bankAction(npcId, action, itemId, quantity) {\n        this.send({ type: 'BANK_ACTION', npcId, action, itemId, quantity });\n    }\n\n    gather(worldItemId, zoneKey) {\n        this.send({ type: 'GATHER', worldItemId, zoneKey });\n    }\n\n    scheduleReconnect(playerName) {\n        if (this.reconnectTimer) return;\n        store.dispatch('chat/addActionLog', {\n            message: `Connection lost. Reconnecting in ${this.reconnectDelay / 1000}s...`,\n            type: 'error',\n        });\n        this.reconnectTimer = setTimeout(() => {\n            this.reconnectTimer = null;\n            this.reconnectDelay = Math.min(this.reconnectDelay * 1.5, this.maxReconnectDelay);\n            if (playerName) {\n                this.connect(playerName).catch(() => { });\n            }\n        }, this.reconnectDelay);\n    }\n\n    disconnect() {\n        if (this.reconnectTimer) {\n            clearTimeout(this.reconnectTimer);\n            this.reconnectTimer = null;\n        }\n        if (this.ws) {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n\n    get isConnected() {\n        return this.ws && this.ws.readyState === WebSocket.OPEN;\n    }\n}\n\nexport const wsService = new WebSocketService();\nexport default wsService;\n"],"mappings":"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","ignoreList":[]}]}